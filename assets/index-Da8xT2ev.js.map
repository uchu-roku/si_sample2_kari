{"version":3,"file":"index-Da8xT2ev.js","sources":["../../node_modules/but-unzip/index.browser.min.mjs","../../node_modules/shpjs/lib/unzip.js","../../node_modules/shpjs/lib/combine.js","../../node_modules/shpjs/lib/binaryajax.js","../../node_modules/shpjs/lib/parseShp.js","../../node_modules/parsedbf/decoder.js","../../node_modules/parsedbf/index.js","../../node_modules/shpjs/lib/index.js"],"sourcesContent":["var d,g=()=>new DecompressionStream(\"deflate-raw\");try{g(),d=async t=>{let s=g(),e=s.writable.getWriter(),f=s.readable.getReader(),a,i=[],r=0,l=0,o;for(e.write(t),e.close();!(o=await f.read()).done;)a=o.value,i.push(a),r+=a.length;return!i[1]&&a||(a=new Uint8Array(r),i.map(n=>(a.set(n,l),l+=n.length))),a}}catch{}var U=new TextDecoder,u=t=>{throw new Error(\"but-unzip~\"+t)},h=t=>U.decode(t),z=(...t)=>[...m(...t)];function*m(t,s=d){let e=t.length-20,f=Math.max(e-65516,2);for(;(e=t.lastIndexOf(80,e-1))!==-1&&!(t[e+1]===75&&t[e+2]===5&&t[e+3]===6)&&e>f;);e===-1&&u(2);let a=(n,w)=>t.subarray(e+=n,e+=w),i=new DataView(t.buffer,t.byteOffset),r=n=>i.getUint16(n+e,!0),l=n=>i.getUint32(n+e,!0),o=r(10);for(o!==r(8)&&u(3),e=l(16);o--;){let n=r(10),w=r(30),b=r(32),p=l(20),y=l(42),x=h(a(46,r(28))),D=h(a(w,b)),v=e,c;e=y,c=a(30+r(26)+r(28),p),yield{filename:x,comment:D,read:()=>n&8?s(c):n?u(1):c},e=v}}export{d as inflateRaw,m as iter,z as unzip};\n","import { iter } from 'but-unzip';\n\nconst regex = /.+\\.(shp|dbf|json|prj|cpg)$/i;\nexport default async (buffer) => {\n  const files = {};\n  const proms = [];\n  for (const entry of iter(buffer)) {\n    if (!regex.test(entry.filename)) {\n      continue;\n    }\n    proms.push(Promise.resolve(entry.read()).then(bytes => files[entry.filename] = bytes));\n  }\n  await Promise.all(proms);\n  const out = {};\n  const decoder = new TextDecoder();\n  for (const [key, value] of Object.entries(files)) {\n    if (key.slice(-3).toLowerCase() === 'shp' || key.slice(-3).toLowerCase() === 'dbf') {\n      out[key] = new DataView(value.buffer, value.byteOffset, value.byteLength)\n    } else {\n      out[key] = decoder.decode(value);\n    }\n  }\n  return out;\n};\n","const URL = globalThis.URL;\n\nexport default (base, type) => {\n  if (!type) {\n    return base;\n  }\n  const url = new URL(base);\n  url.pathname = `${url.pathname}.${type}`;\n  return url.href;\n};\n","import combine from './combine.js';\n\nexport default async function binaryAjax(_url, type) {\n\n  const url = combine(_url, type);\n  const isOptionalTxt = type === 'prj' || type === 'cpg';\n  try {\n    const resp = await fetch(url);\n    if (resp.status > 399) {\n      throw new Error(resp.statusText);\n    }\n    if (isOptionalTxt) {\n      return resp.text();\n    }\n    const parsed = await resp.arrayBuffer();\n    return new DataView(parsed)\n  } catch (e) {\n    if (isOptionalTxt || type === 'dbf') {\n      return false;\n    }\n    throw e;\n  }\n};\n","\n\nfunction isClockWise(array) {\n  let sum = 0;\n  let i = 1;\n  const len = array.length;\n  let prev, cur;\n  const bbox = [array[0][0], array[0][1], array[0][0], array[0][1]];\n  while (i < len) {\n    prev = cur || array[0];\n    cur = array[i];\n    sum += ((cur[0] - prev[0]) * (cur[1] + prev[1]));\n    i++;\n    if (cur[0] < bbox[0]) {\n      bbox[0] = cur[0];\n    }\n    if (cur[1] < bbox[1]) {\n      bbox[1] = cur[1];\n    }\n    if (cur[0] > bbox[2]) {\n      bbox[2] = cur[0];\n    }\n    if (cur[1] > bbox[3]) {\n      bbox[3] = cur[1];\n    }\n  }\n  return {\n    ring: array,\n    clockWise: sum > 0,\n    bbox,\n    children: []\n  }\n\n}\n\nfunction contains(outer, inner) {\n  if (outer.bbox[0] > inner.bbox[0]) {\n    return false;\n  }\n  if (outer.bbox[1] > inner.bbox[1]) {\n    return false;\n  }\n  if (outer.bbox[2] < inner.bbox[2]) {\n    return false;\n  }\n  if (outer.bbox[3] < inner.bbox[3]) {\n    return false;\n  }\n  return true;\n}\n\nfunction handleRings(rings) {\n  const outers = [];\n  const inners = [];\n  for (const ring of rings) {\n    const proccessed = isClockWise(ring);\n    if (proccessed.clockWise) {\n      outers.push(proccessed)\n    } else {\n      inners.push(proccessed)\n    }\n  }\n  // this is an optimization, \n  // but it would also put in weird bad rings that would otherwise get left out\n  // if (outers.length === 1) {\n  //   const out = [outers[0].ring]\n  //   for (const inner of inners) {\n  //     out.push(inner.ring);\n\n  //   }\n  //   return [out];\n  // }\n  for (const inner of inners) {\n    for (const outer of outers) {\n      if (contains(outer, inner)) {\n        outer.children.push(inner.ring);\n        break;\n      }\n    }\n  }\n  const out = [];\n  for (const outer of outers) {\n    out.push([outer.ring].concat(outer.children));\n  }\n  return out;\n}\nfunction polyReduce(a, b) {\n  if (isClockWise(b) || !a.length) {\n    a.push([b]);\n  } else {\n    a[a.length - 1].push(b);\n  }\n  return a;\n}\nParseShp.prototype.parsePoint = function (data) {\n  return {\n    type: 'Point',\n    coordinates: this.parseCoord(data, 0)\n  };\n};\nParseShp.prototype.parseZPoint = function (data) {\n  const pointXY = this.parsePoint(data);\n  pointXY.coordinates.push(data.getFloat64(16, true));\n  return pointXY;\n};\nParseShp.prototype.parsePointArray = function (data, offset, num) {\n  const out = [];\n  let done = 0;\n  while (done < num) {\n    out.push(this.parseCoord(data, offset));\n    offset += 16;\n    done++;\n  }\n  return out;\n};\nParseShp.prototype.parseZPointArray = function (data, zOffset, num, coordinates) {\n  let i = 0;\n  while (i < num) {\n    coordinates[i].push(data.getFloat64(zOffset, true));\n    i++;\n    zOffset += 8;\n  }\n  return coordinates;\n};\nParseShp.prototype.parseArrayGroup = function (data, offset, partOffset, num, tot) {\n  const out = [];\n  let done = 0;\n  let curNum; let nextNum = 0;\n  let pointNumber;\n  while (done < num) {\n    done++;\n    partOffset += 4;\n    curNum = nextNum;\n    if (done === num) {\n      nextNum = tot;\n    } else {\n      nextNum = data.getInt32(partOffset, true);\n    }\n    pointNumber = nextNum - curNum;\n    if (!pointNumber) {\n      continue;\n    }\n    out.push(this.parsePointArray(data, offset, pointNumber));\n    offset += (pointNumber << 4);\n  }\n  return out;\n};\nParseShp.prototype.parseZArrayGroup = function (data, zOffset, num, coordinates) {\n  let i = 0;\n  while (i < num) {\n    coordinates[i] = this.parseZPointArray(data, zOffset, coordinates[i].length, coordinates[i]);\n    zOffset += (coordinates[i].length << 3);\n    i++;\n  }\n  return coordinates;\n};\nParseShp.prototype.parseMultiPoint = function (data) {\n  const out = {};\n  const num = data.getInt32(32, true);\n  if (!num) {\n    return null;\n  }\n  const mins = this.parseCoord(data, 0);\n  const maxs = this.parseCoord(data, 16);\n  out.bbox = [\n    mins[0],\n    mins[1],\n    maxs[0],\n    maxs[1]\n  ];\n  const offset = 36;\n  if (num === 1) {\n    out.type = 'Point';\n    out.coordinates = this.parseCoord(data, offset);\n  } else {\n    out.type = 'MultiPoint';\n    out.coordinates = this.parsePointArray(data, offset, num);\n  }\n  return out;\n};\nParseShp.prototype.parseZMultiPoint = function (data) {\n  const geoJson = this.parseMultiPoint(data);\n  if (!geoJson) {\n    return null;\n  }\n  let num;\n  if (geoJson.type === 'Point') {\n    geoJson.coordinates.push(data.getFloat64(72, true));\n    return geoJson;\n  } else {\n    num = geoJson.coordinates.length;\n  }\n  const zOffset = 52 + (num << 4);\n  geoJson.coordinates = this.parseZPointArray(data, zOffset, num, geoJson.coordinates);\n  return geoJson;\n};\nParseShp.prototype.parsePolyline = function (data) {\n  const out = {};\n  const numParts = data.getInt32(32, true);\n  if (!numParts) {\n    return null;\n  }\n  const mins = this.parseCoord(data, 0);\n  const maxs = this.parseCoord(data, 16);\n  out.bbox = [\n    mins[0],\n    mins[1],\n    maxs[0],\n    maxs[1]\n  ];\n  const num = data.getInt32(36, true);\n  let offset, partOffset;\n  if (numParts === 1) {\n    out.type = 'LineString';\n    offset = 44;\n    out.coordinates = this.parsePointArray(data, offset, num);\n  } else {\n    out.type = 'MultiLineString';\n    offset = 40 + (numParts << 2);\n    partOffset = 40;\n    out.coordinates = this.parseArrayGroup(data, offset, partOffset, numParts, num);\n  }\n  return out;\n};\nParseShp.prototype.parseZPolyline = function (data) {\n  const geoJson = this.parsePolyline(data);\n  if (!geoJson) {\n    return null;\n  }\n  const num = geoJson.coordinates.length;\n  let zOffset;\n  if (geoJson.type === 'LineString') {\n    zOffset = 60 + (num << 4);\n    geoJson.coordinates = this.parseZPointArray(data, zOffset, num, geoJson.coordinates);\n    return geoJson;\n  } else {\n    const totalPoints = geoJson.coordinates.reduce(function (a, v) {\n      return a + v.length;\n    }, 0);\n    zOffset = 56 + (totalPoints << 4) + (num << 2);\n    geoJson.coordinates = this.parseZArrayGroup(data, zOffset, num, geoJson.coordinates);\n    return geoJson;\n  }\n};\nParseShp.prototype.polyFuncs = function (out) {\n  if (!out) {\n    return out;\n  }\n  if (out.type === 'LineString') {\n    out.type = 'Polygon';\n    out.coordinates = [out.coordinates];\n    return out;\n  } else {\n    out.coordinates = handleRings(out.coordinates)\n    if (out.coordinates.length === 1) {\n      out.type = 'Polygon';\n      out.coordinates = out.coordinates[0];\n      return out;\n    } else {\n      out.type = 'MultiPolygon';\n      return out;\n    }\n  }\n};\nParseShp.prototype.parsePolygon = function (data) {\n  return this.polyFuncs(this.parsePolyline(data));\n};\nParseShp.prototype.parseZPolygon = function (data) {\n  return this.polyFuncs(this.parseZPolyline(data));\n};\nconst shpFuncObj = {\n  1: 'parsePoint',\n  3: 'parsePolyline',\n  5: 'parsePolygon',\n  8: 'parseMultiPoint',\n  11: 'parseZPoint',\n  13: 'parseZPolyline',\n  15: 'parseZPolygon',\n  18: 'parseZMultiPoint'\n};\n\nfunction makeParseCoord(trans) {\n  if (trans) {\n    return function (data, offset) {\n      const args = [data.getFloat64(offset, true), data.getFloat64(offset + 8, true)];\n      return trans.inverse(args);\n    };\n  } else {\n    return function (data, offset) {\n      return [data.getFloat64(offset, true), data.getFloat64(offset + 8, true)];\n    };\n  }\n}\n\nfunction ParseShp(buffer, trans) {\n  if (!(this instanceof ParseShp)) {\n    return new ParseShp(buffer, trans);\n  }\n  this.buffer = buffer;\n  this.headers = this.parseHeader();\n  this.shpFuncs(trans);\n  this.rows = this.getRows();\n}\nParseShp.prototype.shpFuncs = function (tran) {\n  let num = this.headers.shpCode;\n  if (num > 20) {\n    num -= 20;\n  }\n  if (!(num in shpFuncObj)) {\n    throw new Error(`I don't know shp type \"${num}\"`);\n  }\n  this.parseFunc = this[shpFuncObj[num]];\n  this.parseCoord = makeParseCoord(tran);\n};\nParseShp.prototype.getShpCode = function () {\n  return this.parseHeader().shpCode;\n};\nParseShp.prototype.parseHeader = function () {\n  const view = this.buffer;\n  return {\n    length: view.getInt32(6 << 2) << 1,\n    version: view.getInt32(7 << 2, true),\n    shpCode: view.getInt32(8 << 2, true),\n    bbox: [\n      view.getFloat64(9 << 2, true),\n      view.getFloat64(11 << 2, true),\n      view.getFloat64(13 << 2, true),\n      view.getFloat64(15 << 2, true)\n    ]\n  };\n};\nParseShp.prototype.getRows = function () {\n  let offset = 100;\n  const len = this.buffer.byteLength - 8;\n  const out = [];\n  let current;\n  while (offset <= len) {\n    current = this.getRow(offset);\n    if (!current) {\n      break;\n    }\n    offset += 8;\n    offset += current.len;\n    if (current.type) {\n      out.push(this.parseFunc(current.data));\n    } else {\n      out.push(null);\n    }\n  }\n  return out;\n};\nParseShp.prototype.getRow = function (offset) {\n  const id = this.buffer.getInt32(offset);\n  const len = this.buffer.getInt32(offset + 4) << 1;\n  if (len === 0) {\n    return {\n      id: id,\n      len: len,\n      type: 0\n    };\n  }\n\n  if (offset + len + 8 > this.buffer.byteLength) {\n    return;\n  }\n  return {\n    id: id,\n    len: len,\n    data: new DataView(this.buffer.buffer, this.buffer.byteOffset + offset + 12, len - 4),\n    type: this.buffer.getInt32(offset + 8, true)\n  };\n};\nexport default function (buffer, trans) {\n  return new ParseShp(buffer, trans).rows;\n};\n","var regex = /^(?:ANSI\\s)?(\\d+)$/m;\nexport function createDecoder(encoding, second) {\n  if (!encoding) {\n    return browserDecoder;\n  }\n  try {\n    new TextDecoder(encoding.trim());\n  } catch (e) {\n    var match = regex.exec(encoding);\n    if (match && !second) {\n      return createDecoder('windows-' + match[1], true);\n    } else {\n      encoding = undefined;\n      return browserDecoder;\n    }\n  }\n  return browserDecoder;\n  function browserDecoder(buffer) {\n    var decoder = new TextDecoder(encoding ? encoding : undefined);\n    var out = decoder.decode(buffer, {\n      stream: true\n    }) + decoder.decode();\n    return out.replace(/\\0/g, '').trim();\n  }\n}\n","import { createDecoder } from './decoder.js';\nfunction dbfHeader(data) {\n  var out = {};\n  out.lastUpdated = new Date(data.getUint8(1) + 1900, data.getUint8(2), data.getUint8(3));\n  out.records = data.getUint32(4, true);\n  out.headerLen = data.getUint16(8, true);\n  out.recLen = data.getUint16(10, true);\n  return out;\n}\n\nfunction dbfRowHeader(data, headerLen, decoder) {\n  var out = [];\n  var offset = 32;\n  while (offset < headerLen) {\n    out.push({\n      name: decoder(new Uint8Array(data.buffer.slice(data.byteOffset + offset, data.byteOffset + offset + 11))),\n      dataType: String.fromCharCode(data.getUint8(offset + 11)),\n      len: data.getUint8(offset + 16),\n      decimal: data.getUint8(offset + 17)\n    });\n    if (data.getUint8(offset + 32) === 13) {\n      break;\n    } else {\n      offset += 32;\n    }\n  }\n  return out;\n}\n\nfunction rowFuncs(buffer, offset, len, type, decoder) {\n  const data = new Uint8Array(buffer.buffer.slice(buffer.byteOffset + offset, buffer.byteOffset + offset + len));\n\n  var textData = decoder(data);\n  switch (type) {\n    case 'N':\n    case 'F':\n    case 'O':\n      return parseFloat(textData, 10);\n    case 'D':\n      return new Date(textData.slice(0, 4), parseInt(textData.slice(4, 6), 10) - 1, textData.slice(6, 8));\n    case 'L':\n      return textData.toLowerCase() === 'y' || textData.toLowerCase() === 't';\n    default:\n      return textData;\n  }\n}\n\nfunction parseRow(buffer, offset, rowHeaders, decoder) {\n  var out = {};\n  var i = 0;\n  var len = rowHeaders.length;\n  var field;\n  var header;\n  while (i < len) {\n    header = rowHeaders[i];\n    field = rowFuncs(buffer, offset, header.len, header.dataType, decoder);\n    offset += header.len;\n    if (typeof field !== 'undefined') {\n      out[header.name] = field;\n    }\n    i++;\n  }\n  return out;\n}\n\nexport default function (buffer, encoding) {\n  var decoder = createDecoder(encoding);\n  var header = dbfHeader(buffer);\n  var rowHeaders = dbfRowHeader(buffer, header.headerLen - 1, decoder);\n\n  var offset = ((rowHeaders.length + 1) << 5) + 2;\n  var recLen = header.recLen;\n  var records = header.records;\n  var out = [];\n  while (records) {\n    out.push(parseRow(buffer, offset, rowHeaders, decoder));\n    offset += recLen;\n    records--;\n  }\n  return out;\n}\n","import proj4 from 'proj4'\nimport unzip from './unzip.js';\nimport binaryAjax from './binaryajax.js';\nimport parseShp from './parseShp.js';\nimport parseDbf from 'parsedbf';\nconst URL = globalThis.URL;\nconst toUitn8Arr = b => {\n  if (!b) {\n    throw new Error('forgot to pass buffer');\n  }\n  if (isArrayBuffer(b)) {\n    return new Uint8Array(b);\n  }\n  if (isArrayBuffer(b.buffer)) {\n    if (b.BYTES_PER_ELEMENT === 1) {\n      return b;\n    }\n    return new Uint8Array(b.buffer, b.byteOffset, b.byteLength);\n  }\n  throw new Error('invalid buffer like object')\n};\nconst txtDecoder = new TextDecoder();\nconst toString = (possibleString) => {\n  if (!possibleString) {\n    return;\n  }\n  if (typeof possibleString === 'string') {\n    return possibleString;\n  }\n  if (isArrayBuffer(possibleString) || ArrayBuffer.isView(possibleString) || isDataView(possibleString)) {\n    return txtDecoder.decode(possibleString);\n  }\n}\nconst toDataView = b => {\n  if (!b) {\n    throw new Error('forgot to pass buffer');\n  }\n  if (isDataView(b)) {\n    return b;\n  }\n  if (isArrayBuffer(b)) {\n    return new DataView(b);\n  }\n  if (isArrayBuffer(b.buffer)) {\n    return new DataView(b.buffer, b.byteOffset, b.byteLength);\n  }\n  throw new Error('invalid buffer like object')\n};\n\nfunction isArrayBuffer(subject) {\n  return subject instanceof globalThis.ArrayBuffer || Object.prototype.toString.call(subject) === '[object ArrayBuffer]';\n}\nfunction isDataView(subject) {\n  return subject instanceof globalThis.DataView || Object.prototype.toString.call(subject) === '[object DataView]'\n}\n\nexport const combine = function ([shp, dbf]) {\n  const out = {};\n  out.type = 'FeatureCollection';\n  out.features = [];\n  let i = 0;\n  const len = shp.length;\n  if (!dbf) {\n    dbf = [];\n  }\n  while (i < len) {\n    out.features.push({\n      type: 'Feature',\n      geometry: shp[i],\n      properties: dbf[i] || {}\n    });\n    i++;\n  }\n  return out;\n};\nexport const parseZip = async function (buffer, whiteList) {\n  let key;\n  buffer = toUitn8Arr(buffer);\n  const zip = await unzip(buffer);\n  const names = [];\n  whiteList = whiteList || [];\n  for (key in zip) {\n    if (key.indexOf('__MACOSX') !== -1) {\n      continue;\n    }\n    if (key.slice(-4).toLowerCase() === '.shp') {\n      names.push(key.slice(0, -4));\n      zip[key.slice(0, -3) + key.slice(-3).toLowerCase()] = zip[key];\n    } else if (key.slice(-4).toLowerCase() === '.prj') {\n      zip[key.slice(0, -3) + key.slice(-3).toLowerCase()] = proj4(zip[key]);\n    } else if (key.slice(-5).toLowerCase() === '.json' || whiteList.indexOf(key.split('.').pop()) > -1) {\n      names.push(key.slice(0, -3) + key.slice(-3).toLowerCase());\n    } else if (key.slice(-4).toLowerCase() === '.dbf' || key.slice(-4).toLowerCase() === '.cpg') {\n      zip[key.slice(0, -3) + key.slice(-3).toLowerCase()] = zip[key];\n    }\n  }\n  if (!names.length) {\n    throw new Error('no layers founds');\n  }\n  const geojson = names.map(function (name) {\n    let parsed, dbf;\n    const lastDotIdx = name.lastIndexOf('.');\n    if (lastDotIdx > -1 && name.slice(lastDotIdx).indexOf('json') > -1) {\n      parsed = JSON.parse(zip[name]);\n      parsed.fileName = name.slice(0, lastDotIdx);\n    } else if (whiteList.indexOf(name.slice(lastDotIdx + 1)) > -1) {\n      parsed = zip[name];\n      parsed.fileName = name;\n    } else {\n      if (zip[name + '.dbf']) {\n        dbf = parseDbf(zip[name + '.dbf'], zip[name + '.cpg']);\n      }\n      parsed = combine([parseShp(zip[name + '.shp'], zip[name + '.prj']), dbf]);\n      parsed.fileName = name;\n    }\n    return parsed;\n  });\n  if (geojson.length === 1) {\n    return geojson[0];\n  } else {\n    return geojson;\n  }\n};\nasync function getZip(base, whiteList) {\n  const a = await binaryAjax(base);\n  return parseZip(a, whiteList);\n}\nconst handleShp = async (base) => {\n  const args = await Promise.all([\n    binaryAjax(base, 'shp'),\n    binaryAjax(base, 'prj')\n  ]);\n  let prj = false;\n  try {\n    if (args[1]) {\n      prj = proj4(args[1]);\n    }\n  } catch (e) {\n    prj = false;\n  }\n  return parseShp(args[0], prj);\n};\nconst handleDbf = async (base) => {\n  const [dbf, cpg] = await Promise.all([\n    binaryAjax(base, 'dbf'),\n    binaryAjax(base, 'cpg')\n  ]);\n  if (!dbf) {\n    return;\n  }\n  return parseDbf(dbf, cpg);\n};\nconst checkSuffix = (base, suffix) => {\n  const url = new URL(base, globalThis?.document?.location);\n  return url.pathname.slice(-4).toLowerCase() === suffix;\n};\nconst fromObject = ({ shp, dbf, cpg, prj }) => {\n  const things = [\n    _parseShp(shp, prj)\n  ]\n  if (dbf) {\n    things.push(_parseDbf(dbf, cpg));\n  }\n  return combine(things);\n}\nexport const getShapefile = async function (base, whiteList) {\n  if (typeof base !== 'string') {\n    if (isArrayBuffer(base) || ArrayBuffer.isView(base) || isDataView(base)) {\n      return parseZip(base);\n    }\n    if (base.shp) {\n      return fromObject(base);\n    }\n    throw new TypeError('must be a string, some sort of Buffer, or an object with at least a .shp property')\n  }\n  if (checkSuffix(base, '.zip')) {\n    return getZip(base, whiteList);\n  }\n  if (checkSuffix(base, '.shp')) {\n    base = base.slice(0, -4);\n  }\n  const results = await Promise.all([\n    handleShp(base),\n    handleDbf(base)\n  ]);\n  return combine(results);\n};\nconst _parseShp = function (shp, prj) {\n  shp = toDataView(shp);\n  prj = toString(prj);\n  if (typeof prj === 'string') {\n    try {\n      prj = proj4(prj);\n    } catch (e) {\n      prj = false;\n    }\n  }\n  return parseShp(shp, prj);\n};\nconst _parseDbf = function (dbf, cpg) {\n  dbf = toDataView(dbf);\n  cpg = toString(cpg);\n  return parseDbf(dbf, cpg);\n};\nexport default getShapefile;\nexport {\n  _parseDbf as parseDbf,\n  _parseShp as parseShp,\n}"],"names":["d","g","t","s","e","f","a","r","l","o","n","U","u","h","m","w","b","p","y","x","D","v","c","regex","unzip","buffer","files","proms","entry","iter","bytes","out","decoder","key","value","URL","combine$1","base","type","url","binaryAjax","_url","combine","isOptionalTxt","resp","parsed","isClockWise","array","sum","i","len","prev","cur","bbox","contains","outer","inner","handleRings","rings","outers","inners","ring","proccessed","ParseShp","data","pointXY","offset","num","done","zOffset","coordinates","partOffset","tot","curNum","nextNum","pointNumber","mins","maxs","geoJson","numParts","shpFuncObj","makeParseCoord","trans","args","tran","view","current","id","parseShp","createDecoder","encoding","second","browserDecoder","match","dbfHeader","dbfRowHeader","headerLen","rowFuncs","textData","parseRow","rowHeaders","field","header","parseDbf","recLen","records","toUitn8Arr","isArrayBuffer","txtDecoder","toString","possibleString","isDataView","toDataView","subject","shp","dbf","parseZip","whiteList","zip","names","proj4","geojson","name","lastDotIdx","getZip","handleShp","prj","handleDbf","cpg","checkSuffix","suffix","fromObject","things","_parseShp","_parseDbf","getShapefile","results"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}